(function(){
var d="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},f="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function h(a){if(a){for(var b=f,c=["String","prototype","repeat"],e=0;e<c.length-1;e++){var g=c[e];g in b||(b[g]={});b=b[g]}c=c[c.length-1];e=b[c];a=a(e);a!=e&&null!=a&&d(b,c,{configurable:!0,writable:!0,value:a})}}
h(function(a){return a?a:function(a){if(null==this)throw new TypeError("The 'this' value for String.prototype.repeat must not be null or undefined");var b=this;if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var e="";a;)if(a&1&&(e+=b),a>>>=1)b+=b;return e}});function l(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}
function m(a,b){function c(){}c.prototype=b.prototype;a.ya=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.xa=function(a,c,k){for(var e=Array(arguments.length-2),g=2;g<arguments.length;g++)e[g-2]=arguments[g];return b.prototype[c].apply(a,e)}};function n(a,b){this.x=a||0;this.y=b||0}function p(a,b,c){a.x=Math.min(Math.max(a.x,b),c);a.y=Math.min(Math.max(a.y,b),c)};function q(a){this.a=a;this.timestamp=Date.now()};var r="",u={};function v(){var a="";if(u.hasOwnProperty("transform"))return u.transform;if(""!=r)var b=r;else b=window.getComputedStyle(document.documentElement,""),b=r=(Array.prototype.slice.call(b).join("").match(/-(moz|webkit|ms)-/)||b.a&&""===b.a&&["","o"])[1];var c=b[0].toUpperCase()+b.substr(1);0<b.length&&(a="Transform",u.transform=c+a);return c+a}
function w(a,b){for(var c,e,g="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),k=1;k<arguments.length;k++){e=arguments[k];for(c in e)a[c]=e[c];for(var t=0;t<g.length;t++)c=g[t],Object.prototype.hasOwnProperty.call(e,c)&&(a[c]=e[c])}}
function x(a){var b=new n;a=a.getBoundingClientRect();var c=document.scrollingElement||document.documentElement;c=new n(window.pageXOffset||c.scrollLeft,window.pageYOffset||c.scrollTop);b.x=a.left+c.x;b.y=a.top+c.y;return b};function y(a){this.g=a||document.documentElement;this.l=this.g.getBoundingClientRect();this.a=new n;this.u=[];this.s=new n;this.B=new n;this.C=new n;this.c=new n;this.h=new n;this.f={I:0,G:0,J:0,H:0};this.T=this.D=this.Y=this.o=this.W=this.V=this.ga=this.K=!1;this.N=0;this.X=[];this.Z=[];this.M=this.U=null;this.v=new n(.035,.035);this.m=new n(0,0);this.A=new n(.1,.1);this.j=new n(0,0);this.O=5;this.w=70;this.i={};this.ha={passive:!1,useCapture:!1}}
y.prototype.onMove=function(a,b){this.X.push(a.bind(b||this))};y.prototype.onMove=y.prototype.onMove;y.prototype.onDown=function(a,b){this.U=a.bind(b||this)};y.prototype.onDown=y.prototype.onDown;y.prototype.onUp=function(a,b){this.Z.push(a.bind(b||this))};y.prototype.onUp=y.prototype.onUp;y.prototype.ja=function(a){this.v.x=this.v.y=a;p(this.v,0,1)};y.prototype.setFriction=y.prototype.ja;y.prototype.la=function(a){this.A.x=this.A.y=a;p(this.A,0,1)};y.prototype.setOffsetFriction=y.prototype.la;
y.prototype.oa=function(a){this.O=a};y.prototype.setThreshold=y.prototype.oa;y.prototype.na=function(a){this.j.x=this.j.y=a;p(this.j,-1,1)};y.prototype.setRestitution=y.prototype.na;y.prototype.ka=function(a){this.w=Math.max(a,0)};y.prototype.setMaxVelocity=y.prototype.ka;y.prototype.ma=function(a){this.M=a};y.prototype.setPreventMoveCheck=y.prototype.ma;y.prototype.pa=function(){return this.v};y.prototype.getFriction=y.prototype.pa;y.prototype.ra=function(){return this.A};
y.prototype.getOffsetFriction=y.prototype.ra;y.prototype.va=function(){return this.O};y.prototype.getThreshold=y.prototype.va;y.prototype.ta=function(){return this.j};y.prototype.getRestitution=y.prototype.ta;y.prototype.qa=function(){return this.w};y.prototype.getMaxVelocity=y.prototype.qa;y.prototype.sa=function(){return this.M};y.prototype.getPreventMoveCheck=y.prototype.sa;y.prototype.ua=function(){return this.g};y.prototype.getTarget=y.prototype.ua;
y.prototype.$=function(a){a&&(this.l=this.g.getBoundingClientRect());return this.l};y.prototype.getTargetBounds=y.prototype.$;y.prototype.setPosition=function(a,b,c){this.a.x=a;this.a.y=b;c&&(this.C.x=a,this.C.y=b,this.T&&(this.c.x=0,this.c.y=0))};y.prototype.setPosition=y.prototype.setPosition;
y.prototype.aa=function(){"ontouchstart"in window||navigator.msMaxTouchPoints?this.i={touchend:{target:this.g,listener:this.L.bind(this)},touchcancel:{target:this.g,listener:this.L.bind(this)},touchstart:{target:this.g,listener:this.ea.bind(this)},touchmove:{target:this.g,listener:this.fa.bind(this)}}:this.i={mouseup:{target:this.g,listener:this.L.bind(this)},mouseleave:{target:this.g,listener:this.L.bind(this)},mousedown:{target:this.g,listener:this.ea.bind(this)},mousemove:{target:this.g,listener:this.fa.bind(this)}};
this.i.scroll={target:window,listener:this.update.bind(this)};for(var a in this.i)this.i[a].target.addEventListener(a,this.i[a].listener,this.ha)};y.prototype.init=y.prototype.aa;y.prototype.F=function(){for(var a in this.i)this.i[a].target.removeEventListener(a,this.i[a].listener,this.ha);this.i={};this.stop()};y.prototype.destroy=y.prototype.F;y.prototype.stop=function(){this.K=!0;this.D=!1};y.prototype.stop=y.prototype.stop;y.prototype.start=function(){this.K=!1;this.D=!0};y.prototype.start=y.prototype.start;
y.prototype.ia=function(a,b,c,e){this.f.I=a||0;this.f.G=b||0;this.f.J=c||0;this.f.H=e||0;this.V=0!=this.f.I||0!=this.f.G;this.W=0!=this.f.J||0!=this.f.H;this.ga=this.V||this.W};y.prototype.setBounds=y.prototype.ia;y.prototype.update=function(){this.l=this.g.getBoundingClientRect();z(this)};y.prototype.update=y.prototype.update;function A(a,b){b=b.getBoundingClientRect();return new n(b.left-a.l.left,b.top-a.l.top)}
function B(a,b){var c=new n;b.touches?(c.x=b.touches[0].clientX-a.l.left,c.y=b.touches[0].clientY-a.l.top):(c.x=b.clientX-a.l.left,c.y=b.clientY-a.l.top);return c}y.prototype.ea=function(a){a=B(this,a);if(!this.U||this.U(a.x,a.y))this.o=!0,this.D=!1,this.B.x=a.x,this.B.y=a.y,this.s.x=this.a.x=a.x,this.s.y=this.a.y=a.y,this.N=Date.now(),this.c.x=0,this.c.y=0,z(this),this.ca()};
y.prototype.ca=function(){var a=this.a;this.u.push(new q(new n(a.x,a.y)));a=Date.now();for(var b=[],c=0,e=this.u.length;c<e;c++)50<=a-this.u[c].timestamp&&b.push(c);c=0;for(e=b.length;c<e;c++)this.u.splice(b[c],1);0<this.u.length&&(a=this.u[0],this.s=a.a,this.N=a.timestamp);this.o&&(this.K||(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)(this.ca.bind(this)))};
y.prototype.fa=function(a){if(this.o){var b=B(this,a);this.M&&this.M(Math.abs(this.B.x-b.x),Math.abs(this.B.y-b.y),!!("ontouchstart"in window||navigator.msMaxTouchPoints))&&!this.Y||(this.Y=!0,a.stopPropagation(),a.preventDefault(),this.a.x=b.x,this.a.y=b.y,z(this))}};
y.prototype.L=function(){this.B.x=0;this.B.y=0;this.Y=!1;if(this.o){this.o=!1;this.D=!0;var a=(Date.now()-this.N)/15;this.c.x=(this.a.x-this.s.x)/a;this.c.y=(this.a.y-this.s.y)/a;p(this.c,-this.w,this.w);this.s.x=0;this.N=this.s.y=0;this.u=[];(Math.abs(this.c.x)>=this.O||Math.abs(this.c.y)>=this.O||0!=this.h.x||0!=this.h.y)&&this.da();a=0;for(var b=this.Z.length;a<b;a++)this.Z[a]()}};function C(a){var b=parseInt(1+"0".repeat(2),10);return Math.round(a*b)/b}
function z(a){if(a.ga){if(a.V)if(0<=a.j.x){var b=a.a;b.x=Math.min(Math.max(b.x,a.f.I),a.f.G);if(a.a.x<=a.f.I||a.a.x>=a.f.G)a.c.x=-1*a.c.x*a.j.x}else{0!=a.h.x?(a.m.x=a.A.x,0!=a.h.x&&(b=a.j.x,a.o&&(b/=2),a.a.x+=D(a.h.x*(1+b)))):a.m.x=0;b=C(a.f.I-a.a.x);var c=C(a.f.G-a.a.x);a.h.x=0<b?b:0>c?c:0}if(a.W)if(0<=a.j.y){if(b=a.a,b.y=Math.min(Math.max(b.y,a.f.J),a.f.H),a.a.y<=a.f.J||a.a.y>=a.f.H)a.c.y=-1*a.c.y*a.j.y}else 0!=a.h.y?(a.m.y=a.A.y,0!=a.h.y&&(b=a.j.x,a.o&&(b/=2),a.a.y+=D(a.h.y*(1+b)))):a.m.y=0,b=
C(a.f.J-a.a.y),c=C(a.f.H-a.a.y),a.h.y=0<b?b:0>c?c:0}if(a.a.x!=a.C.x||a.a.y!=a.C.y){b=0;for(c=a.X.length;b<c;b++)a.X[b](a.a.x,a.a.y,a.c.x,a.c.y);a.C.x=a.a.x;a.C.y=a.a.y}}function D(a){a=a.toString();return parseFloat(a.substring(0,a.indexOf(".")+4))||0}
y.prototype.da=function(){if(this.D){this.T=!0;if(0<Math.abs(this.c.x)){var a=0<this.m.x?this.m.x:this.v.x;this.c.x=D(this.c.x*(1-a));this.a.x+=this.c.x;this.a.x=parseFloat(this.a.x.toFixed(3))}0<Math.abs(this.c.y)&&(a=0<this.m.y?this.m.y:this.v.y,this.c.y=D(this.c.y*(1-a)),this.a.y+=this.c.y,this.a.y=parseFloat(this.a.y.toFixed(3)));p(this.c,-this.w,this.w);z(this);a=C(Math.abs(this.c.x));C(Math.abs(this.c.y));0<a||0<a||0!=this.h.x||0!=this.h.y?this.K||(window.requestAnimationFrame||window.webkitRequestAnimationFrame||
window.mozRequestAnimationFrame)(this.da.bind(this)):this.T=!1}};function E(){this.s=[]}E.prototype.P=function(){throw Error("unimplemented abstract method");};E.prototype.getHandler=E.prototype.P;E.prototype.wa=function(a){this.s.push(a)};E.prototype.onHandlerChange=E.prototype.wa;function F(a,b){this.s=[];this.g=a;this.B={container:document.documentElement,elementBounds:"container",restitution:-.6,resizeUpdate:!0,autoAnchor:!0};this.b=b||{};this.f=this.g.getBoundingClientRect();this.l=new n(.5,.5);this.o=new n;this.c=new n;this.i=new n;this.h=new n;this.a=null;this.u=this.m=!1;this.j=[];G(this)}m(F,E);F.prototype.b={};F.prototype.config=F.prototype.b;
F.prototype.ba=function(){var a=this.B;w(a,this.b);this.b=a;this.b.restitution&&!isNaN(this.b.restitution)&&this.a.na(this.b.restitution);this.b.friction&&!isNaN(this.b.friction)&&this.a.ja(this.b.friction);this.b.offsetFriction&&!isNaN(this.b.offsetFriction)&&this.a.la(this.b.offsetFriction);this.b.threshold&&!isNaN(this.b.threshold)&&this.a.oa(this.b.threshold);this.b.maxVelocity&&!isNaN(this.b.maxVelocity)&&this.a.ka(this.b.maxVelocity);this.b.preventMove&&"function"===typeof this.b.preventMove&&
this.a.ma(this.b.preventMove)};F.prototype.updateSettings=F.prototype.ba;
F.prototype.R=function(a){if(this.b.elementBounds&&(a||!this.b.bounds)){if("string"==typeof this.b.elementBounds){switch(this.b.elementBounds){case "parent":var b=this.g.parentNode;b!=this.g?this.b.elementBounds=b:this.b.elementBounds=this.b.container;break;case "container":this.b.elementBounds=this.b.container||document.documentElement}this.b.elementBounds.nodeType===Node.DOCUMENT_NODE&&(this.b.elementBounds=document.documentElement)}if(this.b.elementBounds.nodeType===Node.ELEMENT_NODE){b=this.b.elementBounds.getBoundingClientRect();
var c=x(this.a.g),e=x(this.b.elementBounds);e.x-=c.x;e.y-=c.y;this.b.bounds={x:e.x,y:e.y,width:b.width,height:b.height}}}this.b.bounds&&(a=this.a.$(a),b=this.f.width>a.width,c=this.f.height>a.height,this.a.ia(b?this.c.x+a.width-this.f.width:this.b.bounds.x+this.c.x,b?this.c.x:this.b.bounds.x+this.b.bounds.width-(this.f.width-this.c.x),c?this.c.y+a.height-this.f.height:this.b.bounds.y+this.c.y,c?this.c.y:this.b.bounds.y+this.b.bounds.height-(this.f.height-this.c.y)))};F.prototype.updateBounds=F.prototype.R;
F.prototype.S=function(){this.i.x=0;for(var a=this.i.y=0,b=this.j.length;a<b;a++){var c=this.j[a],e=c.getBoundingClientRect();c.scrollHeight>e.height&&(this.i.y+=c.scrollTop);c.scrollWidth>e.width&&(this.i.x+=c.scrollLeft)}};F.prototype.updateScrollPositions=F.prototype.S;F.prototype.P=function(){return this.a};
F.prototype.update=function(a){(a=a&&!0===a)||this.ba();this.f=this.g.getBoundingClientRect();this.b.autoAnchor||(this.l.x=void 0!==this.b.anchorX?this.b.anchorX:this.l.x,this.l.y=void 0!==this.b.anchorY?this.b.anchorY:this.l.y,this.c.x=this.f.width*this.l.x,this.c.y=this.f.height*this.l.y);this.h.x=this.g.offsetLeft;this.h.y=this.g.offsetTop;for(var b=[],c=new n,e=this.g.parentElement;e&&e!=this.a.g;){var g=window.getComputedStyle(e).position,k=window.getComputedStyle(e).overflow;if("relative"==
g||"absolute"==g)g=x(e),g.x>c.x&&(c.x=g.x),g.y>c.y&&(c.y=g.y);"auto"!=k&&"scroll"!=k||b.push(e);e=e.parentElement}this.h.x+=c.x;this.h.y+=c.y;c=this.j.slice(0);this.j=[];e=0;for(k=c.length;e<k;e++)-1===b.indexOf(c[e])?c[e].removeEventListener("scroll",this.v.bind(this),!1):this.j.push(c[e]);e=0;for(k=b.length;e<k;e++)-1===this.j.indexOf(b[e])&&(this.j.push(b[e]),b[e].addEventListener("scroll",this.v.bind(this),!1));this.S();this.R(!0);a||this.a.update()};F.prototype.update=F.prototype.update;
F.prototype.v=function(){setTimeout(this.S.bind(this),0)};F.prototype.reset=function(){this.F();this.restore()};F.prototype.reset=F.prototype.reset;F.prototype.F=function(){this.m=!0;this.a.F();delete this.a;this.a=null;var a=this.g;a.style.transform="";a.style[v()]=""};F.prototype.destroy=F.prototype.F;F.prototype.restore=function(){this.m=!1;G(this);for(var a=0,b=this.s.length;a<b;a++)this.s[a](this.P())};F.prototype.restore=F.prototype.restore;
function G(a){a.a=new y(a.b.container);a.a.onUp(a.C,a);a.a.onDown(a.w,a);a.a.onMove(a.A,a);a.ba();H(a);a.update();a.a.aa();a.u=!1;a.o.x=0;a.o.y=0;a.b.resizeUpdate&&window.addEventListener("resize",function(){setTimeout(function(){H(this);this.update()}.bind(this),0)}.bind(a),!1);window.addEventListener("scroll",function(){setTimeout(function(){this.S();this.R(!0)}.bind(this),0)}.bind(a),!1)}function H(a){var b=A(a.a,a.g);a.a.setPosition(b.x+a.c.x,b.y+a.c.y,!0)}
F.prototype.w=function(a,b){if(this.m)return!1;var c=A(this.a,this.g);var e=c.x;var g=c.y;e=a>=e&&a<e+this.f.width&&b>=g&&b<g+this.f.height;this.b.autoAnchor&&e&&(this.c.x=a-c.x,this.c.y=b-c.y,this.R());return this.b.onDown&&(a=this.b.onDown(e,a,b,c.x,c.y,this.f.width,this.f.height),"boolean"==typeof a)?a:e};F.prototype.C=function(){if(!this.m&&this.b.onUp)this.b.onUp()};
F.prototype.A=function(a,b,c,e){if(!this.m&&(this.b.onMove&&(c=this.b.onMove(a,b,c,e),l(c)&&(c.hasOwnProperty("x")&&(a=parseFloat(c.x)),c.hasOwnProperty("y")&&(b=parseFloat(c.y)))),!this.m&&(a=a-this.c.x-this.h.x+this.i.x,b=b-this.c.y-this.h.y+this.i.y,this.b.lockAxis&&this.u&&l(this.b.lockAxis)&&(1==this.b.lockAxis.x&&(a=this.o.x),1==this.b.lockAxis.y&&(b=this.o.y)),c=this.g,e="translate3d("+a+"px,"+b+"px,0)",c.style.transform=e,c.style[v()]=e,this.o.x=a,this.o.y=b,this.u=!0,this.b.onTranslate)))this.b.onTranslate(a,
b,this.f.width,this.f.height,this.b.bounds?this.b.bounds:this.a.$())};function I(a){this.f=a;this.g=this.f.getBoundingClientRect();this.c=null;this.h=this.a=0;this.c=new y(this.f.parentElement);this.c.onDown(this.i,this);this.c.onMove(this.j,this);this.c.aa()}m(I,E);I.prototype.i=function(a,b){var c=this.g.width/2;this.h=180-180/Math.PI*Math.atan2(a-c,b-c)-this.a;return!0};I.prototype.j=function(a,b){var c=this.g.width/2;this.a=180-180/Math.PI*Math.atan2(a-c,b-c)-this.h;this.a%=360;this.f.style.transform="rotate("+this.a+"deg)"};I.prototype.P=function(){return this.c};module.exports={Draggable:F,Rotatable:I,Handler:y};
})()
